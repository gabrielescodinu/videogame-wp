export function moduleData(){return{props:{hover:Boolean,dropPos:String,externalOpen:Boolean,triggerClass:String,onOpen:Function,shortCut:[Boolean,String,Array]},data:function(){return{modelOpen:!1,dropWidth:0,position:this.dropPos,animationClass:"uip-scale-in-top"}},watch:{externalOpen:{handler(t,i){t&&this.openThisComponent()},deep:!0}},mounted:function(){this.mountShortcut()},destroyed(){document.removeEventListener("scroll",this.handleScroll,!0)},unmounted(){document.removeEventListener("scroll",this.handleScroll,!0)},computed:{returnAnimationClass(){return this.animationClass}},methods:{mountShortcut(){if(!this.shortCut)return;let t=JSON.parse(JSON.stringify(this.shortCut)),i=[];window.addEventListener("keydown",e=>{let o=!1;i.push(e.key.toString()),o=!0;for(let e of t)if(!i.includes(e)){o=!1;break}o&&this.openThisComponent()}),window.addEventListener("keyup",t=>{i=[]})},handleScroll(t){this.setPosition()},onClickOutside(t){if(!this.$refs.uipdrop)return;const i=t.composedPath?t.composedPath():void 0;!i||i.includes(this.$refs.uipdrop)||this.$refs.uipdrop.contains(t.target)||this.closeThisComponent()},openThisComponent(){this.modelOpen=!this.modelOpen,1==this.modelOpen&&document.addEventListener("scroll",this.handleScroll,!0),requestAnimationFrame(()=>{document.documentElement.addEventListener("click",this.onClickOutside,!0);let t=document.getElementsByClassName("uip-page-content-frame");t[0]&&t[0].contentWindow.document.body.addEventListener("click",this.onClickOutside,!0),this.onOpen&&this.onOpen(),this.setPosition()})},closeThisComponent(){this.modelOpen=!1,document.documentElement.removeEventListener("click",this.onClickOutside,!0),document.removeEventListener("scroll",this.handleScroll,!0);let t=document.getElementsByClassName("uip-page-content-frame");t[0]&&t[0].contentWindow.document.body.removeEventListener("click",this.onClickOutside,!0)},setPosition(){self=this;if(!self.$el)return;let t=0,i=0,e=0,o=0,n=document.getElementById("uip-ui-preview-area");n&&n.contains(self.$refs.uipdrop)&&(t=n.getBoundingClientRect().top,i=n.getBoundingClientRect().left,o=window.innerWidth-n.getBoundingClientRect().right,e=window.innerHeight-n.getBoundingClientRect().bottom);let s=self.$refs.uipdrop,l=self.$refs.droptrigger,r="auto",p="auto",d="auto",h="auto";this.position||(this.position="bottom-left"),s.getBoundingClientRect().bottom>window.innerHeight&&(this.position=this.position.replace("bottom","top"),"left"==this.position&&(this.position="top-right"),"right"==this.position&&(this.position="top-left")),s.getBoundingClientRect().right>window.innerWidth&&("right"==this.position&&(this.position="left"),"bottom-left"!=this.position&&"top-left"!=this.position||(this.position=this.position.replace("left","right"))),s.getBoundingClientRect().left<10&&("top-right"==this.position&&this.position,"left"==this.position&&(this.position=this.position.replace("left","right"))),this.position&&"bottom-left"!=this.position||(r=l.getBoundingClientRect().bottom+10-t+"px",d=l.getBoundingClientRect().left-i+"px"),"top-left"==this.position&&(p=window.innerHeight-l.getBoundingClientRect().top+10-e+"px",d=l.getBoundingClientRect().left-i+"px"),"bottom-right"==this.position&&(r=l.getBoundingClientRect().bottom+10-t+"px",h=window.innerWidth-l.getBoundingClientRect().right-i+"px"),"top-right"==this.position&&(p=window.innerHeight-l.getBoundingClientRect().top+10-e+"px",h=window.innerWidth-l.getBoundingClientRect().right-o+"px"),"right"==this.position&&(r=l.getBoundingClientRect().top-t+"px",d=l.getBoundingClientRect().right+10-i+"px"),"left"==this.position&&(r=l.getBoundingClientRect().top-t+"px",h=window.innerWidth-l.getBoundingClientRect().left+10-o+"px"),"left"!=this.position&&"bottom-right"!=this.position&&"top-left"!=this.position||(this.animationClass="uip-scale-in-top-right"),"right"!=this.position&&"bottom-left"!=this.position&&"top-right"!=this.position||(this.animationClass="uip-scale-in-top"),s.style.bottom=p,s.style.left=d,s.style.right=h,s.style.top=r},openOnHover(){this.hover&&(this.modelOpen=!0,requestAnimationFrame(()=>{document.documentElement.addEventListener("click",this.onClickOutside,!0),this.onOpen&&this.onOpen(),this.hover&&this.setPosition()}))},closeOnHover(){this.hover&&(this.modelOpen=!1)}},template:'\n      <div class="uip-position-relative" @mouseover="openOnHover()" @mouseleave="closeOnHover()">\n\t  \t  <div class="uip-flex">\n\t\t  \t\t<div class="uip-cursor-pointer" :class="triggerClass" ref="droptrigger" @click="openThisComponent()"><slot name="trigger"></slot></div>\n\t\t\t    <slot name="post-trigger"></slot>\n\t\t    </div>\n\t\t    <div v-if="modelOpen"  ref="uipdrop" class="uip-position-fixed uip-z-index-9999 uip-modal-open" :class="returnAnimationClass">\n          <div class="" style="position: absolute; background: rgba(0,0,0,0); inset: -20px; z-index:0"></div>\n          <div class="uip-shadow uip-position-relative uip-dropdown-conatiner uip-background-default uip-border-round uip-border uip-margin-xl uip-z-index-1">\n\t\t        <slot name="content"></slot>\n\t\t      </div>\n        </div>\n\t    </div>'}};