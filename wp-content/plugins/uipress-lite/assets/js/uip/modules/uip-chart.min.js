import*as charts from"../../libs/charts.min.js";export function moduleData(){return{props:{chartData:Object},data:function(){return{chart:!1}},watch:{chartData:{handler(t,a){this.chart.destroy(),this.createChart()},deep:!0}},computed:{},mounted:function(){this.createChart()},methods:{createChart(){let t=this,a=getComputedStyle(document.documentElement),e=a.getPropertyValue("--uip-color-accent"),o=a.getPropertyValue("--uip-color-red-lighter");""!=t.chartData.colors.main&&(e=t.chartData.colors.main),""!=t.chartData.colors.comp&&(o=t.chartData.colors.comp);let i={labels:t.formatLabels(this.chartData.labels),datasets:[{label:t.chartData.title,backgroundColor:e,borderColor:e,data:t.chartData.data.main}]};t.chartData.data.comparison.length>0&&i.datasets.push({label:t.chartData.title,backgroundColor:o,borderColor:o,data:t.chartData.data.comparison});const r={type:t.chartData.type,data:i,options:t.buildTheChartOptions()};t.chart=new Chart(t.$refs.uipChart,r)},formatLabels(t){let a=[];for(let[e,o]of t.main.entries()){let i=o;t.comparison&&t.comparison[e]&&(i=o+";"+t.comparison[e]),a.push(i)}return a},buildTheChartOptions(){let t=this;return{cutout:"0%",spacing:0,borderRadius:0,tension:.15,pointRadius:0,pointHoverRadius:5,borderRadius:4,animation:!0,interaction:{mode:"nearest"},hover:{intersect:!1},borderSkipped:!1,plugins:{legend:{display:!1,position:"bottom"},tooltip:{position:"average",backgroundColor:"#fff",padding:20,bodySpacing:10,bodyFont:{size:12},titleFont:{size:14,weight:"bold"},mode:"index",intersect:!1,xAlign:"left",yAlign:"center",caretPadding:10,cornerRadius:4,borderColor:"rgba(162, 162, 162, 0.2)",borderWidth:1,titleColor:"#333",bodyColor:"#777",titleMarginBottom:10,bodyFontSize:100,usePointStyle:!0,enabled:!1,external:function(a){t.getTooltip(a)}}},scales:{x:{ticks:{display:!1},grid:{borderWidth:0,display:!0,borderDash:[10,8],color:"rgba(162, 162, 162, 0.4)"}},y:{beginAtZero:!0,ticks:{display:!1},grid:{borderWidth:0,display:!1}}}}},getTooltip(t){let a=document.getElementById("chartjs-tooltip");a||((a=document.createElement("div")).id="chartjs-tooltip",a.innerHTML="<div class='uip-background-default uip-boder uip-shadow uip-border-round'></div>",document.body.appendChild(a));let e=t.tooltip;if(0!==e.opacity){if(a.classList.remove("above","below","no-transform"),e.yAlign?a.classList.add(e.yAlign):a.classList.add("no-transform"),e.body){e.title,e.body.map(function(t){return t.lines});let o=e.dataPoints[0].dataset.label,i='<div class="uip-background-default">';i+="<div class='uip-text-bold uip-padding-xs uip-border-bottom uip-body-font'>"+o+"</div>",i+='<div class="uip-padding-xs uip-flex uip-flex-column uip-row-gap-xxs">',e.dataPoints.forEach(function(t,a){let o=t.label.split(";")[a],r=e.labelColors[a].borderColor;i+='<div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-between uip-w-125">',i+='<div class="uip-text-bold" style="color:'+r+'">'+t.formattedValue+"</div>",i+='<div class="uip-text-s uip-text-muted uip-no-wrap">'+o+"</div>",i+="</div>"}),i+="</div>",i+="</div>",a.querySelector("div").innerHTML=i;let r=t.chart.canvas.getBoundingClientRect();Chart.helpers.toFont(e.options.bodyFont);a.style.opacity=1,a.style.position="absolute",a.style.left=r.left+window.pageXOffset+e.caretX+"px",a.style.top=r.top+window.pageYOffset+e.caretY+"px",a.style.padding=e.padding+"px "+e.padding+"px",a.style.pointerEvents="none"}}else a.style.opacity=0}},template:'       <canvas class="uip-min-w-200 uip-chart-canvas" ref="uipChart"></canvas>'}};