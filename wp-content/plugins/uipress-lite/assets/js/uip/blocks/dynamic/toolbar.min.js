const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function moduleData(){return{props:{display:String,name:String,block:Object},data:function(){return{toolbar:JSON.parse(JSON.stringify(this.uipData.toolbar))}},inject:["uipData","uipress","uiTemplate"],watch:{"uipData.toolbar":{handler(e,t){},deep:!0}},mounted:function(){let e=this;document.addEventListener("uip_page_change_loaded",t=>{e.updateToolBarFromFrame(),setTimeout(function(){e.updateQM()},100)},{once:!1})},computed:{getHidden(){let e=this.block.settings.block.options.hiddenToolbarItems.value;return this.uipress.isObject(e)?[]:e}},methods:{updateQM(){let e=this;if(!("query-monitor"in e.toolbar))return;let t=document.getElementsByClassName("uip-page-content-frame");if(!t[0])return;let i=t[0].contentWindow.document.getElementById("wp-admin-bar-query-monitor");if(!i)return;let n=i.getElementsByClassName("ab-label");e.toolbar["query-monitor"].title=n[0].outerHTML,e.toolbar["query-monitor"].frameLink=!0,i.classList.contains("qm-warning")&&(e.toolbar["query-monitor"].title+='<span class="uip-display-inline-block uip-border-circle uip-w-8 uip-ratio-1-1 uip-background-red uip-margin-left-xxs"></span>'),(i.classList.contains("qm-alert")||i.classList.contains("qm-notice")||i.classList.contains("qm-deprecated")||i.classList.contains("qm-strict")||i.classList.contains("qm-expensive"))&&(e.toolbar["query-monitor"].title+='<span class="uip-display-inline-block uip-border-circle uip-w-8 uip-ratio-1-1 uip-background-orange uip-margin-left-xxs"></span>');let s=i.querySelectorAll("#wp-admin-bar-query-monitor-default > li"),u={};for(let e of s){let t=e.getAttribute("id"),i=t.replace("wp-admin-bar-query-monitor-",""),n=e.querySelector("a"),s=n.getAttribute("href"),o=n.textContent;u[i]={group:"",href:s,id:t,meta:[],parent:"query-monitor",submenu:{},title:o,frameLink:!0}}e.toolbar["query-monitor"].submenu=u},updateToolBarFromFrame(){let e=document.getElementsByClassName("uip-page-content-frame"),t=this;if(e[0]){let i=e[0];if(i.contentWindow.uipMasterToolbar&&void 0!==i.contentWindow.uipMasterToolbar){let e=i.contentWindow.uipMasterToolbar;Array.isArray(e)||(t.toolbar=JSON.parse(JSON.stringify(e)))}}},ifHiden(e){return!this.getHidden.includes(e)},customIcon(e){let t=this.uipress.get_block_option(this.block,"block","editToolbarItems");if(!this.uipress.isObject(t))return!1;if(e in t){let i=t[e].icon;if(""!=i)return i}return!1},customTitle(e){let t=this.uipress.get_block_option(this.block,"block","editToolbarItems");if(!this.uipress.isObject(t))return!1;if(Object.hasOwn(t,e)){let i=t[e].title;if(""!=i)return i}return!1},updatePage(e,t,i){if(!(t.ctrlKey||t.shiftKey||t.metaKey||t.button&&1==t.button))if(t.preventDefault(),e.frameLink){let t=document.getElementsByClassName("uip-page-content-frame");if(!t[0])return;t[0].contentWindow.document.querySelector("#"+e.id+" a").click()}else i?this.uipress.updatePage(e.href,i):this.uipress.updatePage(e.href)}},template:'\n            <div :class="block.settings.advanced.options.classes.value"  class="uip-admin-toolbar uip-text-normal" :id="block.uid">\n              <component is="style" scoped>\n                .uip-admin-toolbar #wpadminbar {all:unset}\n                .uip-admin-toolbar #wpadminbar .ab-icon {font-size:18px; filter: contrast(0.6);}\n              </component>\n              \n              <div id="wpadminbar">\n              \n                <div class="uip-flex uip-flex-row uip-flex-center uip-gap-s">\n                  <template v-for="item in toolbar">\n                    <div class="" v-if="ifHiden(item.id)" :id="\'wp-admin-bar-\' + item.id" :class="item.meta.class">\n                      \x3c!--FIRST DROP --\x3e\n                      <drop-down :hover="true" dropPos="bottom-left">\n                        <template v-slot:trigger>\n                          <a :href="item.href" @click="updatePage(item, $event)" class="uip-link-default uip-no-underline uip-toolbar-top-item uip-flex uip-gap-xs uip-flex-center">\n                            <div class="uip-icon uip-toolbar-top-item-icon uip-text-l" v-if="customIcon(item.id)">{{customIcon(item.id)}}</div>\n                            \n                            <component v-if="customIcon(item.id)" is="style" scoped>\n                              #{{\'wp-admin-bar-\' + item.id}} .ab-icon{display:none}\n                            </component>\n                            \n                            <div class="uip-line-height-1 uip-flex uip-gap-xxs" v-if="customTitle(item.id)">{{customTitle(item.id)}}</div>\n                            <div class="uip-line-height-1 uip-flex uip-gap-xxs uip-flex-center" v-if="!customTitle(item.id)" v-html="item.title"></div>\n                          </a>\n                        </template>\n                        <template v-slot:content v-if="item.submenu && Object.keys(item.submenu).length > 0">\n                          <div class="uip-flex uip-flex-column uip-toolbar-submenu">\n                          \n                          \n                            \x3c!-- NETWORK ADMIN TOOLBAR --\x3e\n                            <template v-if="item.id == \'my-sites\'" v-for="subsection in item.submenu">\n                              <div class="uip-padding-xs uip-flex uip-flex-column uip-row-gap-xxs uip-min-w-130">\n                                <template v-for="sub in subsection.submenu">\n                                  \x3c!--SECOND DROP --\x3e\n                                <drop-down width="200" :hover="true">\n                                    <template v-slot:trigger>\n                                      <a :href="sub.href" @click="updatePage(sub, $event, true)"  class="uip-link-default uip-no-underline uip-toolbar-sub-item uip-flex uip-flex-center uip-flex-between uip-gap-s" >\n                                        <span v-html="sub.title"></span>\n                                        <span v-if="sub.submenu" class="uip-icon">chevron_right</span>\n                                      </a>\n                                    </template>\n                                    <template v-slot:content v-if="sub.submenu">\n                                      <div class="uip-flex uip-flex-column uip-row-gap-xxs uip-padding-xxs uip-toolbar-submenu">\n                                        <template v-for="subsub in sub.submenu">\n                                          <a :href="subsub.href" @click="updatePage(subsub, $event, true)"  class="uip-link-default uip-no-underline" v-html="subsub.title"></a>\n                                        </template>\n                                      </div>\n                                    </template>\n                                  </drop-down>\n                                  \x3c!--END SECOND DROP --\x3e\n                                </template>\n                              </div>\n                              <div v-if="subsection.id == \'my-sites-super-admin\'" class="uip-border-bottom"></div>                            </template>\n                            \x3c!-- END NETWORK ADMIN TOOLBAR --\x3e\n                            \n                            \n                            <div v-else  class="uip-padding-s uip-min-w-130 uip-flex uip-flex-column uip-row-gap-xs">\n                              <template v-for="sub in item.submenu">\n                                \x3c!--SECOND DROP --\x3e\n                                <drop-down width="200" dropPos="right" triggerClass="uip-flex uip-flex-grow" :hover="true">\n                                  <template v-slot:trigger>\n                                    <a @click="updatePage(sub, $event)" :href="sub.frameLink" class="uip-link-default uip-no-underline uip-toolbar-sub-item uip-flex uip-flex-center uip-flex-between uip-gap-s uip-flex-grow" >\n                                      <span v-html="sub.title"></span>\n                                      <span v-if="Object.keys(sub.submenu).length > 0" class="uip-icon">chevron_right</span>\n                                    </a>\n                                  </template>\n                                  <template v-slot:content v-if="Object.keys(sub.submenu).length > 0">\n                                    <div class="uip-flex uip-flex-column uip-row-gap-xxs uip-padding-s uip-toolbar-submenu uip-row-gap-xs">\n                                      <template v-for="subsub in sub.submenu">\n                                        <a @click="updatePage(subsub, $event)" :href="subsub.frameLink" class="uip-link-default uip-no-underline" v-html="subsub.title"></a>\n                                      </template>\n                                    </div>\n                                  </template>\n                                </drop-down>\n                                \x3c!--END SECOND DROP --\x3e\n                              </template>\n                            </div>\n                          </div>\n                        </template>\n                      </drop-down>\n                      \x3c!--END FIRST DROP --\x3e\n                    </div>\n                  </template>\n                </div>\n              \n              </div>\n              \n            </div>'}};