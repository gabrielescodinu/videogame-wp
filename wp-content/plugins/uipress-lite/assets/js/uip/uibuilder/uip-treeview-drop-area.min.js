const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function moduleData(){return{props:{content:Array,returnData:Function,layout:String,dropAreaStyle:String},data:function(){return{items:this.content,emptyMessage:__("Drag blocks here","uipress-lite"),footerhideen:!1,drag:!1,activeBlock:this.returnActiveBlock}},inject:["uipData","uiTemplate","router","uipress"],watch:{content:{handler(e,t){this.items=e},deep:!0}},computed:{returnActiveBlock(){return"uid"in this.$route.params&&this.$route.params.uid}},methods:{itemAdded(e){if(e.added){let t=JSON.parse(JSON.stringify(this.uiTemplate.content)),i=e.added.element;"uid"in i?this.uipress.logHistoryChange(e.added.element.name+" "+__("block moved","uipress-lite"),t,!1):(i.uid=this.uipress.createUID(),this.uipress.logHistoryChange(e.added.element.name+" "+__("block added","uipress-lite"),t,!1)),0===Object.keys(i.settings).length&&this.uipress.inject_block_presets(i,i.settings)}this.returnData(this.items)},setdropAreaStylees(){let e=[];return e.class="uip-flex uip-flex-column uip-row-gap-xxs uip-w-100p",this.dropAreaStyle&&(e.style=this.dropAreaStyle),e},returnCardKey:e=>e.uid,returnDragStyle(){if(this.uiTemplate.drag)return"border-color:var(--uip-background-primary);"},openSettings(e){e.tabOpen=!e.tabOpen;let t=this.$route.params.templateID;this.router.push({path:"/uibuilder/"+t+"/settings/blocks/"+e.uid,query:{...this.$route.query}})},isActive(e){return"uid"in this.$route.params&&this.$route.params.uid==e},buildClasses(e){let t="uip-border-round uip-padding-xxs";return this.isActive(e.uid)?t+=" uip-background-primary-wash uip-text-bold":t+=" uip-background-muted",t}},template:'<div class="uip-border-round uip-h-100p uip-w-100p uip-flex uip-drop-area"\n\t  :style="returnDragStyle()" :class="{\'uip-drop-hightlight\' : uiTemplate.drag}">\n           \n\t\t\t<draggable \n\t  \t\tv-model="items" \n\t\t\t  :component-data="setdropAreaStylees()"\n\t  \t\t:group="{ name: \'uip-blocks\', pull: true, put: true }"\n\t  \t\t@start="uiTemplate.drag=true" \n\t  \t\t@end="uiTemplate.drag = false" \n        @change="itemAdded"\n\t\t\t  ghost-class="uip-block-ghost"\n        handle=".uip-block-drag"\n        animation="300"\n\t\t\t  :sort="true"\n\t  \t\titem-key="uid">\n\t  \t\t\t<template #item="{element, index}">\n            \n            <div class=" uip-border-round">\n              <div class="uip-flex ui-flex-middle uip-flex-center uip-gap-xxs" style="min-width:160px" :class="buildClasses(element)">\n                <drop-down dropPos="left" >\n                  <template v-slot:trigger>\n                      <div class="uip-icon uip-icon-small-emphasis uip-padding-xxxs uip-border-round hover:uip-background-grey uip-cursor-pointer uip-flex-no-grow ">\n                        more_vert\n                      </div>\n                  </template>\n                  <template v-slot:content>\n                    <div class="uip-padding-xxs">\n                      <block-actions :block="element" :parentList="items" :currentIndex="index" :reverse="true"></block-actions>\n                    </div>\n                  </template>\n                </drop-down>\n                <div class="uip-cursor-pointer uip-background-muted uip-icon uip-icon-small-emphasis uip-border-round uip-block-drag">drag_indicator</div>\n                <div class="uip-cursor-pointer uip-icon uip-icon-small-emphasis" @click="openSettings(element)">{{element.icon}}</div>\n                <div class="uip-cursor-pointer uip-flex-grow uip-text-s uip-flex-grow uip-no-wrap" @click="openSettings(element)">{{element.name}}</div>\n                \n                \x3c!--Chevs --\x3e\n                <div v-if="element.content" class="uip-ratio-1-1 uip-icon uip-padding-xxxs uip-text-l uip-line-height-1 uip-cursor-pointer uip-flex uip-flex-center uip-margin-left-xs" type="button" @click="element.tabOpen = !element.tabOpen">\n                  <span v-if="!element.tabOpen">chevron_left</span>\n                  <span v-if="element.tabOpen">expand_more</span>\n                </div>\n                \n              </div>\n              \n              <div v-if="element.tabOpen && element.content" class="uip-margin-left-s uip-margin-top-xxs">\n                <uip-treeview-drop-area :content="element.content" :returnData="function(data){element.content = data}" ></uip-treeview-drop-area>\n              </div>\n            </div>  \n          \n\t  \t\t\t</template>\n\t\t\t\t\x3c!--FOOTER--\x3e\n\t\t\t\t<template #footer v-if="uiTemplate.drag && items.length < 1">\n            <div class="uip-flex uip-flex-center uip-flex-middle uip-flex-row ">\n\t\t\t\t\t    <div  ref="footer" class="uip-text-muted uip-text-center uip-padding-xxs uip-text-center uip-icon" >add</div>\n            </div>\n\t\t\t\t</template>\n\t\t\t</draggable>\n\t    \t\n\t\t</div>'}};